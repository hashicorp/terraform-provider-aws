---
subcategory: "Route 53"
layout: "aws"
page_title: "AWS: aws_route53_traffic_policy_document"
description: |-
    Generates an Route53 traffic policy document in JSON format
---


<!-- Please do not edit this file, it is generated. -->
# Data Source: aws_route53_traffic_policy_document

Generates an Route53 traffic policy document in JSON format for use with resources that expect policy documents such as [`aws_route53_traffic_policy`](/docs/providers/aws/r/route53_traffic_policy.html).

## Example Usage

### Basic Example

```python
# DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
from constructs import Construct
from cdktf import Token, TerraformStack
#
# Provider bindings are generated by running `cdktf get`.
# See https://cdk.tf/provider-generation for more details.
#
from imports.aws.data_aws_region import DataAwsRegion
from imports.aws.data_aws_route53_traffic_policy_document import DataAwsRoute53TrafficPolicyDocument
from imports.aws.route53_traffic_policy import Route53TrafficPolicy
class MyConvertedCode(TerraformStack):
    def __init__(self, scope, name):
        super().__init__(scope, name)
        current = DataAwsRegion(self, "current")
        example = DataAwsRoute53TrafficPolicyDocument(self, "example",
            endpoint=[DataAwsRoute53TrafficPolicyDocumentEndpoint(
                id="my_elb",
                type="elastic-load-balancer",
                value="elb-111111.${" + current.name + "}.elb.amazonaws.com"
            ), DataAwsRoute53TrafficPolicyDocumentEndpoint(
                id="site_down_banner",
                region=Token.as_string(current.name),
                type="s3-website",
                value="www.example.com"
            )
            ],
            record_type="A",
            rule=[DataAwsRoute53TrafficPolicyDocumentRule(
                id="site_switch",
                primary=DataAwsRoute53TrafficPolicyDocumentRulePrimary(
                    endpoint_reference="my_elb"
                ),
                secondary=DataAwsRoute53TrafficPolicyDocumentRuleSecondary(
                    endpoint_reference="site_down_banner"
                ),
                type="failover"
            )
            ],
            start_rule="site_switch"
        )
        aws_route53_traffic_policy_example = Route53TrafficPolicy(self, "example_2",
            comment="example comment",
            document=Token.as_string(example.json),
            name="example"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        aws_route53_traffic_policy_example.override_logical_id("example")
```

### Complex Example

The following example showcases the use of nested rules within the traffic policy document and introduces the `geoproximity` rule type.

```python
# DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
from constructs import Construct
from cdktf import Token, TerraformStack
#
# Provider bindings are generated by running `cdktf get`.
# See https://cdk.tf/provider-generation for more details.
#
from imports.aws.data_aws_route53_traffic_policy_document import DataAwsRoute53TrafficPolicyDocument
from imports.aws.route53_traffic_policy import Route53TrafficPolicy
class MyConvertedCode(TerraformStack):
    def __init__(self, scope, name):
        super().__init__(scope, name)
        example = DataAwsRoute53TrafficPolicyDocument(self, "example",
            endpoint=[DataAwsRoute53TrafficPolicyDocumentEndpoint(
                id="na_endpoint_a",
                type="elastic-load-balancer",
                value="elb-111111.us-west-1.elb.amazonaws.com"
            ), DataAwsRoute53TrafficPolicyDocumentEndpoint(
                id="na_endpoint_b",
                type="elastic-load-balancer",
                value="elb-222222.us-west-1.elb.amazonaws.com"
            ), DataAwsRoute53TrafficPolicyDocumentEndpoint(
                id="eu_endpoint",
                type="elastic-load-balancer",
                value="elb-333333.eu-west-1.elb.amazonaws.com"
            ), DataAwsRoute53TrafficPolicyDocumentEndpoint(
                id="ap_endpoint",
                type="elastic-load-balancer",
                value="elb-444444.ap-northeast-2.elb.amazonaws.com"
            )
            ],
            record_type="A",
            rule=[DataAwsRoute53TrafficPolicyDocumentRule(
                id="na_rule",
                primary=DataAwsRoute53TrafficPolicyDocumentRulePrimary(
                    endpoint_reference="na_endpoint_a"
                ),
                secondary=DataAwsRoute53TrafficPolicyDocumentRuleSecondary(
                    endpoint_reference="na_endpoint_b"
                ),
                type="failover"
            ), DataAwsRoute53TrafficPolicyDocumentRule(
                geo_proximity_location=[DataAwsRoute53TrafficPolicyDocumentRuleGeoProximityLocation(
                    bias=Token.as_string(10),
                    evaluate_target_health=True,
                    region="aws:route53:us-west-1",
                    rule_reference="na_rule"
                ), DataAwsRoute53TrafficPolicyDocumentRuleGeoProximityLocation(
                    bias=Token.as_string(10),
                    endpoint_reference="eu_endpoint",
                    evaluate_target_health=True,
                    region="aws:route53:eu-west-1"
                ), DataAwsRoute53TrafficPolicyDocumentRuleGeoProximityLocation(
                    bias=Token.as_string(0),
                    endpoint_reference="ap_endpoint",
                    evaluate_target_health=True,
                    region="aws:route53:ap-northeast-2"
                )
                ],
                id="geoproximity_rule",
                type="geoproximity"
            )
            ],
            start_rule="geoproximity_rule"
        )
        aws_route53_traffic_policy_example = Route53TrafficPolicy(self, "example_1",
            comment="example comment",
            document=Token.as_string(example.json),
            name="example"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        aws_route53_traffic_policy_example.override_logical_id("example")
```

## Argument Reference

The following arguments are optional:

* `endpoint` (Optional) - Configuration block for the definitions of the endpoints that you want to use in this traffic policy. See below
* `record_type` (Optional) - DNS type of all of the resource record sets that Amazon Route 53 will create based on this traffic policy.
* `rule` (Optional) - Configuration block for definitions of the rules that you want to use in this traffic policy. See below
* `start_endpoint` (Optional) - An endpoint to be as the starting point for the traffic policy.
* `start_rule` (Optional) - A rule to be as the starting point for the traffic policy.
* `version` (Optional) - Version of the traffic policy format.

### `endpoint`

* `id` - (Required) ID of an endpoint you want to assign.
* `type` - (Optional) Type of the endpoint. Valid values are `value`, `cloudfront`, `elastic-load-balancer`, `s3-website`, `application-load-balancer`, `network-load-balancer` and `elastic-beanstalk`
* `region` - (Optional) To route traffic to an Amazon S3 bucket that is configured as a website endpoint, specify the region in which you created the bucket for `region`.
* `value` - (Optional) Value of the `type`.

### `rule`

* `id` - (Required) ID of a rule you want to assign.
* `type` - (Optional) Type of the rule.
* `primary` - (Optional) Configuration block for the settings for the rule or endpoint that you want to route traffic to whenever the corresponding resources are available. Only valid for `failover` type. See below
* `secondary` - (Optional) Configuration block for the rule or endpoint that you want to route traffic to whenever the primary resources are not available. Only valid for `failover` type. See below
* `location` - (Optional) Configuration block for when you add a geolocation rule, you configure your traffic policy to route your traffic based on the geographic location of your users.  Only valid for `geo` type. See below
* `geo_proximity_location` - (Optional) Configuration block for when you add a geoproximity rule, you configure Amazon Route 53 to route traffic to your resources based on the geographic location of your resources. Only valid for `geoproximity` type. See below
* `regions` - (Optional) Configuration block for when you add a latency rule, you configure your traffic policy to route your traffic based on the latency (the time delay) between your users and the AWS regions where you've created AWS resources such as ELB load balancers and Amazon S3 buckets. Only valid for `latency` type. See below
* `items` - (Optional) Configuration block for when you add a multivalue answer rule, you configure your traffic policy to route traffic approximately randomly to your healthy resources.  Only valid for `multivalue` type. See below

### `primary` and `secondary`

* `endpoint_reference` - (Optional) References to an endpoint.
* `evaluate_target_health` - (Optional) Indicates whether you want Amazon Route 53 to evaluate the health of the endpoint and route traffic only to healthy endpoints.
* `health_check` - (Optional) If you want to associate a health check with the endpoint or rule.
* `rule_reference` - (Optional) References to a rule.

### `location`

* `continent` - (Optional) Value of a continent.
* `country` - (Optional) Value of a country.
* `endpoint_reference` - (Optional) References to an endpoint.
* `evaluate_target_health` - (Optional) Indicates whether you want Amazon Route 53 to evaluate the health of the endpoint and route traffic only to healthy endpoints.
* `health_check` - (Optional) If you want to associate a health check with the endpoint or rule.
* `is_default` - (Optional) Indicates whether this set of values represents the default location.
* `rule_reference` - (Optional) References to a rule.
* `subdivision` - (Optional) Value of a subdivision.

### `geo_proximity_location`

* `bias` - (Optional) Specify a value for `bias` if you want to route more traffic to an endpoint from nearby endpoints (positive values) or route less traffic to an endpoint (negative values).
* `endpoint_reference` - (Optional) References to an endpoint.
* `evaluate_target_health` - (Optional) Indicates whether you want Amazon Route 53 to evaluate the health of the endpoint and route traffic only to healthy endpoints.
* `health_check` - (Optional) If you want to associate a health check with the endpoint or rule.
* `latitude` - (Optional) Represents the location south (negative) or north (positive) of the equator. Valid values are -90 degrees to 90 degrees.
* `longitude` - (Optional) Represents the location west (negative) or east (positive) of the prime meridian. Valid values are -180 degrees to 180 degrees.
* `region` - (Optional) If your endpoint is an AWS resource, specify the AWS Region that you created the resource in.
* `rule_reference` - (Optional) References to a rule.

### `region`

* `endpoint_reference` - (Optional) References to an endpoint.
* `evaluate_target_health` - (Optional) Indicates whether you want Amazon Route 53 to evaluate the health of the endpoint and route traffic only to healthy endpoints.
* `health_check` - (Optional) If you want to associate a health check with the endpoint or rule.
* `region` - (Optional) Region code for the AWS Region that you created the resource in.
* `rule_reference` - (Optional) References to a rule.

### `item`

* `endpoint_reference` - (Optional) References to an endpoint.
* `health_check` - (Optional) If you want to associate a health check with the endpoint or rule.

## Attribute Reference

This data source exports the following attributes in addition to the arguments above:

* `json` - Standard JSON policy document rendered based on the arguments above.

<!-- cache-key: cdktf-0.20.1 input-d5da9f957492c81a0818cf4e7ac99e776513cf79a34b5e4cc41b3f9e5ae17152 -->