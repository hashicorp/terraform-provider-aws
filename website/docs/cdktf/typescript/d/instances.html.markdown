---
subcategory: "EC2 (Elastic Compute Cloud)"
layout: "aws"
page_title: "AWS: aws_instances"
description: |-
  Get information on an Amazon EC2 instances.
---


<!-- Please do not edit this file, it is generated. -->
# Data Source: aws_instances

Use this data source to get IDs or IPs of Amazon EC2 instances to be referenced elsewhere,
e.g., to allow easier migration from another management solution
or to make it easier for an operator to connect through bastion host(s).

-> **Note:** It's a best practice to expose instance details via [outputs](https://www.terraform.io/docs/configuration/outputs.html)
and [remote state](https://www.terraform.io/docs/state/remote.html) and
**use [`terraform_remote_state`](https://www.terraform.io/docs/providers/terraform/d/remote_state.html)
data source instead** if you manage referenced instances via Terraform.

~> **Note:** It's strongly discouraged to use this data source for querying ephemeral
instances (e.g., managed via autoscaling group), as the output may change at any time
and you'd need to re-run `apply` every time an instance comes up or dies.

## Example Usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Fn, Token, TerraformCount, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { DataAwsInstances } from "./.gen/providers/aws/data-aws-instances";
import { Eip } from "./.gen/providers/aws/eip";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const test = new DataAwsInstances(this, "test", {
      filter: [
        {
          name: "instance.group-id",
          values: ["sg-12345678"],
        },
      ],
      instanceStateNames: ["running", "stopped"],
      instanceTags: {
        Role: "HardWorker",
      },
    });
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const testCount = TerraformCount.of(Token.asNumber(Fn.lengthOf(test.ids)));
    const awsEipTest = new Eip(this, "test_1", {
      instance: Token.asString(Fn.lookupNested(test.ids, [testCount.index])),
      count: testCount,
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsEipTest.overrideLogicalId("test");
  }
}

```

## Argument Reference

This data source supports the following arguments:

* `region` - (Optional) Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the [provider configuration](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#aws-configuration-reference).
* `instanceTags` - (Optional) Map of tags, each pair of which must
exactly match a pair on desired instances.
* `instanceStateNames` - (Optional) List of instance states that should be applicable to the desired instances. The permitted values are: `pending, running, shutting-down, stopped, stopping, terminated`. The default value is `running`.
* `filter` - (Optional) One or more filters to apply to the search.
  If multiple `filter` blocks are provided, they all must be true.
  For a full reference of filter names, see [describe-instances in the AWS CLI reference][1].
  See [`filter` Block](#filter-block) below.

### `filter` Block

The `filter` block supports the following arguments:

* `name` - (Required) Name of the filter.
  For a full reference of filter names, see [describe-instances in the AWS CLI reference][1].
* `values` - (Required) One or more values to match.

## Attribute Reference

This data source exports the following attributes in addition to the arguments above:

* `id` - AWS Region.
* `ids` - IDs of instances found through the filter
* `privateIps` - Private IP addresses of instances found through the filter
* `publicIps` - Public IP addresses of instances found through the filter
* `ipv6Addresses` - IPv6 addresses of instances found through the filter

## Timeouts

[Configuration options](https://developer.hashicorp.com/terraform/language/resources/syntax#operation-timeouts):

- `read` - (Default `20m`)

[1]: http://docs.aws.amazon.com/cli/latest/reference/ec2/describe-instances.html

<!-- cache-key: cdktf-0.20.8 input-6308e4c44188d6beffa8b245a86ab3068eb0dcd69baeb36b275d321a2c027b3d -->