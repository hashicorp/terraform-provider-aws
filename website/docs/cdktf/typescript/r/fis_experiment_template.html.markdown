---
subcategory: "FIS (Fault Injection Simulator)"
layout: "aws"
page_title: "AWS: aws_fis_experiment_template"
description: |-
  Provides an FIS Experiment Template.
---


<!-- Please do not edit this file, it is generated. -->
# Resource: aws_fis_experiment_template

Provides an FIS Experiment Template, which can be used to run an experiment.
An experiment template contains one or more actions to run on specified targets during an experiment.
It also contains the stop conditions that prevent the experiment from going out of bounds.
See [Amazon Fault Injection Simulator](https://docs.aws.amazon.com/fis/index.html)
for more information.

## Example Usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { FisExperimentTemplate } from "./.gen/providers/aws/fis-experiment-template";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new FisExperimentTemplate(this, "example", {
      action: [
        {
          actionId: "aws:ec2:terminate-instances",
          name: "example-action",
          target: {
            key: "Instances",
            value: "example-target",
          },
        },
      ],
      description: "example",
      roleArn: Token.asString(awsIamRoleExample.arn),
      stopCondition: [
        {
          source: "none",
        },
      ],
      target: [
        {
          name: "example-target",
          resourceTag: [
            {
              key: "env",
              value: "example",
            },
          ],
          resourceType: "aws:ec2:instance",
          selectionMode: "COUNT(1)",
        },
      ],
    });
  }
}

```

## Example Usage with Report Configuration

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, Fn, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { DataAwsIamPolicyDocument } from "./.gen/providers/aws/data-aws-iam-policy-document";
import { DataAwsPartition } from "./.gen/providers/aws/data-aws-partition";
import { FisExperimentTemplate } from "./.gen/providers/aws/fis-experiment-template";
import { IamPolicy } from "./.gen/providers/aws/iam-policy";
import { IamRole } from "./.gen/providers/aws/iam-role";
import { IamRolePolicyAttachment } from "./.gen/providers/aws/iam-role-policy-attachment";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const reportAccess = new DataAwsIamPolicyDocument(this, "report_access", {
      statement: [
        {
          actions: ["logs:CreateLogDelivery"],
          effect: "Allow",
          resources: ["*"],
          sid: "logsDelivery",
        },
        {
          actions: ["s3:PutObject", "s3:GetObject"],
          effect: "Allow",
          resources: ["*"],
          sid: "ReportsBucket",
        },
        {
          actions: ["cloudwatch:GetDashboard"],
          effect: "Allow",
          resources: ["*"],
          sid: "GetDashboard",
        },
        {
          actions: ["cloudwatch:getMetricWidgetImage"],
          effect: "Allow",
          resources: ["*"],
          sid: "GetDashboardData",
        },
      ],
      version: "2012-10-17",
    });
    const current = new DataAwsPartition(this, "current", {});
    const awsIamPolicyReportAccess = new IamPolicy(this, "report_access_2", {
      name: "report_access",
      policy: Token.asString(reportAccess.json),
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsIamPolicyReportAccess.overrideLogicalId("report_access");
    const example = new IamRole(this, "example", {
      assumeRolePolicy: Token.asString(
        Fn.jsonencode({
          Statement: [
            {
              Action: "sts:AssumeRole",
              Effect: "Allow",
              Principal: {
                Service: ["fis.${" + current.dnsSuffix + "}"],
              },
            },
          ],
          Version: "2012-10-17",
        })
      ),
      name: "example",
    });
    const awsIamRolePolicyAttachmentReportAccess = new IamRolePolicyAttachment(
      this,
      "report_access_4",
      {
        policyArn: Token.asString(awsIamPolicyReportAccess.arn),
        role: test.name,
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsIamRolePolicyAttachmentReportAccess.overrideLogicalId("report_access");
    const awsFisExperimentTemplateExample = new FisExperimentTemplate(
      this,
      "example_5",
      {
        action: [
          {
            actionId: "aws:ec2:terminate-instances",
            name: "example-action",
            target: {
              key: "Instances",
              value: "example-target",
            },
          },
        ],
        description: "example",
        experimentReportConfiguration: {
          dataSources: {
            cloudwatchDashboard: [
              {
                dashboardArn: Token.asString(
                  awsCloudwatchDashboardExample.dashboardArn
                ),
              },
            ],
          },
          outputs: {
            s3Configuration: {
              bucketName: Token.asString(awsS3BucketExample.bucket),
              prefix: "fis-example-reports",
            },
          },
          postExperimentDuration: "PT10M",
          preExperimentDuration: "PT10M",
        },
        roleArn: example.arn,
        stopCondition: [
          {
            source: "none",
          },
        ],
        tags: {
          Name: "example",
        },
        target: [
          {
            name: "example-target",
            resourceTag: [
              {
                key: "env",
                value: "example",
              },
            ],
            resourceType: "aws:ec2:instance",
            selectionMode: "COUNT(1)",
          },
        ],
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsFisExperimentTemplateExample.overrideLogicalId("example");
  }
}

```

## Argument Reference

The following arguments are required:

* `action` - (Required) Action to be performed during an experiment. See below.
* `description` - (Required) Description for the experiment template.
* `roleArn` - (Required) ARN of an IAM role that grants the AWS FIS service permission to perform service actions on your behalf.
* `stopCondition` - (Required) When an ongoing experiment should be stopped. See below.

The following arguments are optional:

* `region` - (Optional) Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the [provider configuration](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#aws-configuration-reference).
* `experimentOptions` - (Optional) The experiment options for the experiment template. See [experiment_options](#experiment_options) below for more details!
* `tags` - (Optional) Key-value mapping of tags. If configured with a provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.
* `target` - (Optional) Target of an action. See below.
* `logConfiguration` - (Optional) The configuration for experiment logging. See below.
* `experimentReportConfiguration` - (Optional) The configuration for [experiment reporting](https://docs.aws.amazon.com/fis/latest/userguide/experiment-report-configuration.html). See below.

### experiment_options

The `experimentOptions` block supports the following:

* `accountTargeting` - (Optional) Specifies the account targeting setting for experiment options. Supports `single-account` and `multi-account`.
* `emptyTargetResolutionMode` - (Optional) Specifies the empty target resolution mode for experiment options. Supports `fail` and `skip`.

### `action`

* `actionId` - (Required) ID of the action. To find out what actions are supported see [AWS FIS actions reference](https://docs.aws.amazon.com/fis/latest/userguide/fis-actions-reference.html).
* `name` - (Required) Friendly name of the action.
* `description` - (Optional) Description of the action.
* `parameter` - (Optional) Parameter(s) for the action, if applicable. See below.
* `startAfter` - (Optional) Set of action names that must complete before this action can be executed.
* `target` - (Optional) Action's target, if applicable. See below.

#### `parameter`

* `key` - (Required) Parameter name.
* `value` - (Required) Parameter value.

For a list of parameters supported by each action, see [AWS FIS actions reference](https://docs.aws.amazon.com/fis/latest/userguide/fis-actions-reference.html).

#### `target` (`action.*.target`)

* `key` - (Required) Target type. Valid values are `AutoScalingGroups` (EC2 Auto Scaling groups), `Buckets` (S3 Buckets), `Cluster` (EKS Cluster), `Clusters` (ECS Clusters), `DBInstances` (RDS DB Instances), `Instances` (EC2 Instances), `ManagedResources` (EKS clusters, Application and Network Load Balancers, and EC2 Auto Scaling groups that are enabled for ARC zonal shift), `Nodegroups` (EKS Node groups), `Pods` (EKS Pods), `ReplicationGroups`(ElastiCache Redis Replication Groups), `Roles` (IAM Roles), `SpotInstances` (EC2 Spot Instances), `Subnets` (VPC Subnets), `Tables` (DynamoDB encrypted global tables), `Tasks` (ECS Tasks), `TransitGateways` (Transit gateways), `Volumes` (EBS Volumes). See the [documentation](https://docs.aws.amazon.com/fis/latest/userguide/actions.html#action-targets) for more details.
* `value` - (Required) Target name, referencing a corresponding target.

### `stopCondition`

* `source` - (Required) Source of the condition. One of `none`, `aws:cloudwatch:alarm`.
* `value` - (Optional) ARN of the CloudWatch alarm. Required if the source is a CloudWatch alarm.

### `target`

* `name` - (Required) Friendly name given to the target.
* `resourceType` - (Required) AWS resource type. The resource type must be supported for the specified action. To find out what resource types are supported, see [Targets for AWS FIS](https://docs.aws.amazon.com/fis/latest/userguide/targets.html#resource-types).
* `selectionMode` - (Required) Scopes the identified resources. Valid values are `ALL` (all identified resources), `COUNT(n)` (randomly select `n` of the identified resources), `PERCENT(n)` (randomly select `n` percent of the identified resources).
* `filter` - (Optional) Filter(s) for the target. Filters can be used to select resources based on specific attributes returned by the respective describe action of the resource type. For more information, see [Targets for AWS FIS](https://docs.aws.amazon.com/fis/latest/userguide/targets.html#target-filters). See below.
* `resourceArns` - (Optional) Set of ARNs of the resources to target with an action. Conflicts with `resourceTag`.
* `resourceTag` - (Optional) Tag(s) the resources need to have to be considered a valid target for an action. Conflicts with `resourceArns`. See below.
* `parameters` - (Optional) The resource type parameters.

~> **NOTE:** The `target` configuration block requires either `resourceArns` or `resourceTag`.

#### `filter`

* `path` - (Required) Attribute path for the filter.
* `values` - (Required) Set of attribute values for the filter.

~> **NOTE:** Values specified in a `filter` are joined with an `OR` clause, while values across multiple `filter` blocks are joined with an `AND` clause. For more information, see [Targets for AWS FIS](https://docs.aws.amazon.com/fis/latest/userguide/targets.html#target-filters).

#### `resourceTag`

* `key` - (Required) Tag key.
* `value` - (Required) Tag value.

### `logConfiguration`

* `logSchemaVersion` - (Required) The schema version. See [documentation](https://docs.aws.amazon.com/fis/latest/userguide/monitoring-logging.html#experiment-log-schema) for the list of schema versions.
* `cloudwatchLogsConfiguration` - (Optional) The configuration for experiment logging to Amazon CloudWatch Logs. See below.
* `s3Configuration` - (Optional) The configuration for experiment logging to Amazon S3. See below.

#### `cloudwatchLogsConfiguration`

* `logGroupArn` - (Required) The Amazon Resource Name (ARN) of the destination Amazon CloudWatch Logs log group.

#### `s3Configuration`

* `bucketName` - (Required) The name of the destination bucket.
* `prefix` - (Optional) The bucket prefix.

### `experimentReportConfiguration`

* `dataSources` - (Required) The data sources for the experiment report. See below.
* `outputs` - (Required) The outputs for the experiment report. See below.
* `postExperimentDuration` - (Optional) The duration of the post-experiment period. Defaults to `PT20M`.
* `preExperimentDuration` - (Optional) The duration of the pre-experiment period. Defaults to `PT20M`.

#### `dataSources`

* `cloudwatchDashboard` - (Required) The data sources for the experiment report. See below.

#### `cloudwatchDashboard`

* `dashboardArn` - (Required) The ARN of the CloudWatch dashboard.

#### `outputs`

* `s3Configuration` - (Required) The data sources for the experiment report. See below.

#### `s3Configuration`

* `bucketName` - (Required) The name of the destination bucket.
* `prefix` - (Optional) The bucket prefix.

## Attribute Reference

This resource exports the following attributes in addition to the arguments above:

* `id` - Experiment Template ID.

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import FIS Experiment Templates using the `id`. For example:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { FisExperimentTemplate } from "./.gen/providers/aws/fis-experiment-template";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    FisExperimentTemplate.generateConfigForImport(
      this,
      "template",
      "EXT123AbCdEfGhIjK"
    );
  }
}

```

Using `terraform import`, import FIS Experiment Templates using the `id`. For example:

```console
% terraform import aws_fis_experiment_template.template EXT123AbCdEfGhIjK
```

<!-- cache-key: cdktf-0.20.8 input-ca46f43f7ea4dc10f0160f34ee46899f344e2a63b9d91d7ac1630e7d792a2ee3 -->