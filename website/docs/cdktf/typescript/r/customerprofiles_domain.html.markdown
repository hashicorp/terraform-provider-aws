---
subcategory: "Connect Customer Profiles"
layout: "aws"
page_title: "AWS: aws_customerprofiles_domain"
description: |-
  Terraform resource for managing an Amazon Customer Profiles Domain.
---


<!-- Please do not edit this file, it is generated. -->
# Resource: aws_customerprofiles_domain

Terraform resource for managing an Amazon Customer Profiles Domain.
See the [Create Domain](https://docs.aws.amazon.com/customerprofiles/latest/APIReference/API_CreateDomain.html) for more information.

## Example Usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { CustomerprofilesDomain } from "./.gen/providers/aws/customerprofiles-domain";
interface MyConfig {
  defaultExpirationDays: any;
}
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string, config: MyConfig) {
    super(scope, name);
    new CustomerprofilesDomain(this, "example", {
      domainName: "example",
      defaultExpirationDays: config.defaultExpirationDays,
    });
  }
}

```

### With SQS DLQ and KMS set

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, Fn, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { CustomerprofilesDomain } from "./.gen/providers/aws/customerprofiles-domain";
import { KmsKey } from "./.gen/providers/aws/kms-key";
import { S3Bucket } from "./.gen/providers/aws/s3-bucket";
import { S3BucketPolicy } from "./.gen/providers/aws/s3-bucket-policy";
import { SqsQueue } from "./.gen/providers/aws/sqs-queue";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const example = new KmsKey(this, "example", {
      deletionWindowInDays: 10,
      description: "example",
    });
    const awsS3BucketExample = new S3Bucket(this, "example_1", {
      bucket: "example",
      forceDestroy: true,
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsS3BucketExample.overrideLogicalId("example");
    const awsS3BucketPolicyExample = new S3BucketPolicy(this, "example_2", {
      bucket: Token.asString(awsS3BucketExample.id),
      policy: Token.asString(
        Fn.jsonencode({
          Statement: [
            {
              Action: ["s3:GetObject", "s3:PutObject", "s3:ListBucket"],
              Effect: "Allow",
              Principal: {
                Service: "profile.amazonaws.com",
              },
              Resource: [
                awsS3BucketExample.arn,
                "${" + awsS3BucketExample.arn + "}/*",
              ],
              Sid: "Customer Profiles S3 policy",
            },
          ],
          Version: "2012-10-17",
        })
      ),
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsS3BucketPolicyExample.overrideLogicalId("example");
    const awsSqsQueueExample = new SqsQueue(this, "example_3", {
      name: "example",
      policy: Token.asString(
        Fn.jsonencode({
          Statement: [
            {
              Action: ["sqs:SendMessage"],
              Effect: "Allow",
              Principal: {
                Service: "profile.amazonaws.com",
              },
              Resource: "*",
              Sid: "Customer Profiles SQS policy",
            },
          ],
          Version: "2012-10-17",
        })
      ),
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsSqsQueueExample.overrideLogicalId("example");
    new CustomerprofilesDomain(this, "test", {
      deadLetterQueueUrl: Token.asString(awsSqsQueueExample.id),
      defaultEncryptionKey: example.arn,
      defaultExpirationDays: 365,
      domainName: example,
    });
  }
}

```

## Argument Reference

The following arguments are required:

* `domainName` - The name for your Customer Profile domain. It must be unique for your AWS account.
* `defaultExpirationDays` - The default number of days until the data within the domain expires.

The following arguments are optional:

* `deadLetterQueueUrl` - The URL of the SQS dead letter queue, which is used for reporting errors associated with ingesting data from third party applications.
* `defaultEncryptionKey` - The default encryption key, which is an AWS managed key, is used when no specific type of encryption key is specified. It is used to encrypt all data before it is placed in permanent or semi-permanent storage.
* `matching` - A block that specifies the process of matching duplicate profiles. [Documented below](#matching).
* `ruleBasedMatching` - A block that specifies the process of matching duplicate profiles using the Rule-Based matching. [Documented below](#rule_based_matching).
* `tags` - Tags to apply to the domain. If configured with a provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.

### `matching`

The `matching` configuration block supports the following attributes:

* `enabled` - (Required) The flag that enables the matching process of duplicate profiles.
* `autoMerging` - (Optional) A block that specifies the configuration about the auto-merging process. [Documented below](#auto_merging).
* `exportingConfig` - (Optional) A block that specifies the configuration for exporting Identity Resolution results. [Documented below](#exporting_config).
* `jobSchedule` - (Optional) A block that specifies the day and time when you want to start the Identity Resolution Job every week. [Documented below](#job_schedule).

### `ruleBasedMatching`

The `ruleBasedMatching` configuration block supports the following attributes:

* `enabled` - (Required) The flag that enables the rule-based matching process of duplicate profiles.
* `attributeTypesSelector` - (Optional) A block that configures information about the `AttributeTypesSelector` where the rule-based identity resolution uses to match profiles. [Documented below](#attribute_types_selector).
* `conflictResolution` - (Optional) A block that specifies how the auto-merging process should resolve conflicts between different profiles. [Documented below](#conflict_resolution).
* `exportingConfig` - (Optional) A block that specifies the configuration for exporting Identity Resolution results. [Documented below](#exporting_config).
* `matchingRules` - (Optional) A block that configures how the rule-based matching process should match profiles. You can have up to 15 `rule` in the `natching_rules`. [Documented below](#matching_rules).
* `maxAllowedRuleLevelForMatching` - (Optional) Indicates the maximum allowed rule level for matching.
* `maxAllowedRuleLevelForMerging` - (Optional) Indicates the maximum allowed rule level for merging.

### `autoMerging`

The `autoMerging` configuration block supports the following attributes:

* `enabled` - (Required) The flag that enables the auto-merging of duplicate profiles.
* `conflictResolution` - (Optional) A block that specifies how the auto-merging process should resolve conflicts between different profiles. [Documented below](#conflict_resolution).
* `consolidation` - (Optional) A block that specifies a list of matching attributes that represent matching criteria. If two profiles meet at least one of the requirements in the matching attributes list, they will be merged. [Documented below](#consolidation).
* `min_allowed_confidence_score_for_merging ` - (Optional) A number between 0 and 1 that represents the minimum confidence score required for profiles within a matching group to be merged during the auto-merge process. A higher score means higher similarity required to merge profiles.

### `conflictResolution`

The `conflictResolution` configuration block supports the following attributes:

* `conflictResolvingModel` - (Required) How the auto-merging process should resolve conflicts between different profiles. Valid values are `RECENCY` and `SOURCE`
* `sourceName` - (Optional) The `ObjectType` name that is used to resolve profile merging conflicts when choosing `SOURCE` as the `ConflictResolvingModel`.

### `consolidation`

The `consolidation` configuration block supports the following attributes:

* `matchingAttributesList` - (Required) A list of matching criteria.

### `exportingConfig`

The `exportingConfig` configuration block supports the following attributes:

* `s3_exporting_config` - (Optional) A block that specifies the S3 location where Identity Resolution Jobs write result files. [Documented below](#s3_exporting_config).

### `s3_exporting_config`

The `s3_exporting_config` configuration block supports the following attributes:

* `s3BucketName` - (Required) The name of the S3 bucket where Identity Resolution Jobs write result files.
* `s3KeyName` - (Optional) The S3 key name of the location where Identity Resolution Jobs write result files.

### `jobSchedule`

The `jobSchedule` configuration block supports the following attributes:

* `dayOfTheWeek` - (Required) The day when the Identity Resolution Job should run every week.
* `time` - (Required) The time when the Identity Resolution Job should run every week.

### `attributeTypesSelector`

The `attributeTypesSelector` configuration block supports the following attributes:

* `attributeMatchingModel` - (Required) Configures the `AttributeMatchingModel`, you can either choose `ONE_TO_ONE` or `MANY_TO_MANY`.
* `address` - (Optional) The `Address` type. You can choose from `Address`, `BusinessAddress`, `MaillingAddress`, and `ShippingAddress`.
* `emailAddress` - (Optional) The `Email` type. You can choose from `EmailAddress`, `BusinessEmailAddress` and `PersonalEmailAddress`.
* `phoneNumber` - (Optional) The `PhoneNumber` type. You can choose from `PhoneNumber`, `HomePhoneNumber`, and `MobilePhoneNumber`.

### `matchingRules`

The `matchingRules` configuration block supports the following attributes:

* `rule` - (Required) A single rule level of the `match_rules`. Configures how the rule-based matching process should match profiles.

## Attribute Reference

This resource exports the following attributes in addition to the arguments above:

* `arn` - The Amazon Resource Name (ARN) of the Customer Profiles Domain.
* `id` - The identifier of the Customer Profiles Domain.
* `tagsAll` - A map of tags assigned to the resource, including those inherited from the provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).

## Timeouts

[Configuration options](https://developer.hashicorp.com/terraform/language/resources/syntax#operation-timeouts):

* `create` - (Default `30m`)
* `update` - (Default `30m`)
* `delete` - (Default `30m`)

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Amazon Customer Profiles Domain using the resource `id`. For example:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { CustomerprofilesDomain } from "./.gen/providers/aws/customerprofiles-domain";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    CustomerprofilesDomain.generateConfigForImport(
      this,
      "example",
      "e6f777be-22d0-4b40-b307-5d2720ef16b2"
    );
  }
}

```

Using `terraform import`, import Amazon Customer Profiles Domain using the resource `id`. For example:

```console
% terraform import aws_customerprofiles_domain.example e6f777be-22d0-4b40-b307-5d2720ef16b2
```

<!-- cache-key: cdktf-0.20.8 input-f6eb0adce7382de9efe642aadae2cc68aa938c107380833e54341129ce75077b -->