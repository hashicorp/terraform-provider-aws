---
subcategory: "SFN (Step Functions)"
layout: "aws"
page_title: "AWS: aws_sfn_state_machine"
description: |-
  Provides a Step Function State Machine resource.
---


<!-- Please do not edit this file, it is generated. -->
# Resource: aws_sfn_state_machine

Provides a Step Function State Machine resource

## Example Usage

### Basic (Standard Workflow)

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { SfnStateMachine } from "./.gen/providers/aws/sfn-state-machine";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new SfnStateMachine(this, "sfn_state_machine", {
      definition:
        '{\n  "Comment": "A Hello World example of the Amazon States Language using an AWS Lambda Function",\n  "StartAt": "HelloWorld",\n  "States": {\n    "HelloWorld": {\n      "Type": "Task",\n      "Resource": "${' +
        lambda.arn +
        '}",\n      "End": true\n    }\n  }\n}\n\n',
      name: "my-state-machine",
      roleArn: iamForSfn.arn,
    });
  }
}

```

### Basic (Express Workflow)

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { SfnStateMachine } from "./.gen/providers/aws/sfn-state-machine";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new SfnStateMachine(this, "sfn_state_machine", {
      definition:
        '{\n  "Comment": "A Hello World example of the Amazon States Language using an AWS Lambda Function",\n  "StartAt": "HelloWorld",\n  "States": {\n    "HelloWorld": {\n      "Type": "Task",\n      "Resource": "${' +
        lambda.arn +
        '}",\n      "End": true\n    }\n  }\n}\n\n',
      name: "my-state-machine",
      roleArn: iamForSfn.arn,
      type: "EXPRESS",
    });
  }
}

```

### Publish (Publish SFN version)

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { SfnStateMachine } from "./.gen/providers/aws/sfn-state-machine";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new SfnStateMachine(this, "sfn_state_machine", {
      definition:
        '{\n  "Comment": "A Hello World example of the Amazon States Language using an AWS Lambda Function",\n  "StartAt": "HelloWorld",\n  "States": {\n    "HelloWorld": {\n      "Type": "Task",\n      "Resource": "${' +
        lambda.arn +
        '}",\n      "End": true\n    }\n  }\n}\n\n',
      name: "my-state-machine",
      publish: true,
      roleArn: iamForSfn.arn,
      type: "EXPRESS",
    });
  }
}

```

### Logging

~> *NOTE:* See the [AWS Step Functions Developer Guide](https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html) for more information about enabling Step Function logging.

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { SfnStateMachine } from "./.gen/providers/aws/sfn-state-machine";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new SfnStateMachine(this, "sfn_state_machine", {
      definition:
        '{\n  "Comment": "A Hello World example of the Amazon States Language using an AWS Lambda Function",\n  "StartAt": "HelloWorld",\n  "States": {\n    "HelloWorld": {\n      "Type": "Task",\n      "Resource": "${' +
        lambda.arn +
        '}",\n      "End": true\n    }\n  }\n}\n\n',
      loggingConfiguration: {
        includeExecutionData: true,
        level: "ERROR",
        logDestination: "${" + logGroupForSfn.arn + "}:*",
      },
      name: "my-state-machine",
      roleArn: iamForSfn.arn,
    });
  }
}

```

## Argument Reference

This resource supports the following arguments:

* `definition` - (Required) The [Amazon States Language](https://docs.aws.amazon.com/step-functions/latest/dg/concepts-amazon-states-language.html) definition of the state machine.
* `loggingConfiguration` - (Optional) Defines what execution history events are logged and where they are logged. The `loggingConfiguration` parameter is only valid when `type` is set to `EXPRESS`. Defaults to `OFF`. For more information see [Logging Express Workflows](https://docs.aws.amazon.com/step-functions/latest/dg/cw-logs.html) and [Log Levels](https://docs.aws.amazon.com/step-functions/latest/dg/cloudwatch-log-level.html) in the AWS Step Functions User Guide.
* `name` - (Optional) The name of the state machine. The name should only contain `0`-`9`, `A`-`Z`, `a`-`z`, `-` and `_`. If omitted, Terraform will assign a random, unique name.
* `namePrefix` - (Optional) Creates a unique name beginning with the specified prefix. Conflicts with `name`.
* `publish` - (Optional) Set to true to publish a version of the state machine during creation. Default: false.
* `roleArn` - (Required) The Amazon Resource Name (ARN) of the IAM role to use for this state machine.
* `tags` - (Optional) Key-value map of resource tags. If configured with a provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.
* `tracingConfiguration` - (Optional) Selects whether AWS X-Ray tracing is enabled.
* `type` - (Optional) Determines whether a Standard or Express state machine is created. The default is `STANDARD`. You cannot update the type of a state machine once it has been created. Valid values: `STANDARD`, `EXPRESS`.

### `loggingConfiguration` Configuration Block

* `includeExecutionData` - (Optional) Determines whether execution data is included in your log. When set to `false`, data is excluded.
* `level` - (Optional) Defines which category of execution history events are logged. Valid values: `ALL`, `ERROR`, `FATAL`, `OFF`
* `logDestination` - (Optional) Amazon Resource Name (ARN) of a CloudWatch log group. Make sure the State Machine has the correct IAM policies for logging. The ARN must end with `:*`

### `tracingConfiguration` Configuration Block

* `enabled` - (Optional) When set to `true`, AWS X-Ray tracing is enabled. Make sure the State Machine has the correct IAM policies for logging. See the [AWS Step Functions Developer Guide](https://docs.aws.amazon.com/step-functions/latest/dg/xray-iam.html) for details.

## Attribute Reference

This resource exports the following attributes in addition to the arguments above:

* `id` - The ARN of the state machine.
* `arn` - The ARN of the state machine.
* `creationDate` - The date the state machine was created.
* `stateMachineVersionArn` - The ARN of the state machine version.
* `status` - The current status of the state machine. Either `ACTIVE` or `DELETING`.
* `tagsAll` - A map of tags assigned to the resource, including those inherited from the provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).

## Timeouts

[Configuration options](https://developer.hashicorp.com/terraform/language/resources/syntax#operation-timeouts):

* `create` - (Default `5m`)
* `update` - (Default `1m`)
* `delete` - (Default `5m`)

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import State Machines using the `arn`. For example:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { SfnStateMachine } from "./.gen/providers/aws/sfn-state-machine";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    SfnStateMachine.generateConfigForImport(
      this,
      "foo",
      "arn:aws:states:eu-west-1:123456789098:stateMachine:bar"
    );
  }
}

```

Using `terraform import`, import State Machines using the `arn`. For example:

```console
% terraform import aws_sfn_state_machine.foo arn:aws:states:eu-west-1:123456789098:stateMachine:bar
```

<!-- cache-key: cdktf-0.20.1 input-0671383dcd1147fbb37fbbbabd2d0733dcc04eb98bb95589ba88d57ddf354c78 -->