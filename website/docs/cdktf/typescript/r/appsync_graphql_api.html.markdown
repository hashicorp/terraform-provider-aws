---
subcategory: "AppSync"
layout: "aws"
page_title: "AWS: aws_appsync_graphql_api"
description: |-
  Provides an AppSync GraphQL API.
---


<!-- Please do not edit this file, it is generated. -->
# Resource: aws_appsync_graphql_api

Provides an AppSync GraphQL API.

## Example Usage

### API Key Authentication

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new AppsyncGraphqlApi(this, "example", {
      authenticationType: "API_KEY",
      name: "example",
    });
  }
}

```

### AWS IAM Authentication

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new AppsyncGraphqlApi(this, "example", {
      authenticationType: "AWS_IAM",
      name: "example",
    });
  }
}

```

### AWS Cognito User Pool Authentication

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new AppsyncGraphqlApi(this, "example", {
      authenticationType: "AMAZON_COGNITO_USER_POOLS",
      name: "example",
      userPoolConfig: {
        awsRegion: Token.asString(current.name),
        defaultAction: "DENY",
        userPoolId: Token.asString(awsCognitoUserPoolExample.id),
      },
    });
  }
}

```

### OpenID Connect Authentication

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new AppsyncGraphqlApi(this, "example", {
      authenticationType: "OPENID_CONNECT",
      name: "example",
      openidConnectConfig: {
        issuer: "https://example.com",
      },
    });
  }
}

```

### AWS Lambda Authorizer Authentication

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
import { LambdaPermission } from "./.gen/providers/aws/lambda-permission";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const example = new AppsyncGraphqlApi(this, "example", {
      authenticationType: "AWS_LAMBDA",
      lambdaAuthorizerConfig: {
        authorizerUri:
          "arn:aws:lambda:us-east-1:123456789012:function:custom_lambda_authorizer",
      },
      name: "example",
    });
    new LambdaPermission(this, "appsync_lambda_authorizer", {
      action: "lambda:InvokeFunction",
      functionName: "custom_lambda_authorizer",
      principal: "appsync.amazonaws.com",
      sourceArn: example.arn,
      statementId: "appsync_lambda_authorizer",
    });
  }
}

```

### With Multiple Authentication Providers

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new AppsyncGraphqlApi(this, "example", {
      additionalAuthenticationProvider: [
        {
          authenticationType: "AWS_IAM",
        },
      ],
      authenticationType: "API_KEY",
      name: "example",
    });
  }
}

```

### With Schema

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new AppsyncGraphqlApi(this, "example", {
      authenticationType: "AWS_IAM",
      name: "example",
      schema: "schema {\n\tquery: Query\n}\ntype Query {\n  test: Int\n}\n\n",
    });
  }
}

```

### Enabling Logging

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
import { DataAwsIamPolicyDocument } from "./.gen/providers/aws/data-aws-iam-policy-document";
import { IamRole } from "./.gen/providers/aws/iam-role";
import { IamRolePolicyAttachment } from "./.gen/providers/aws/iam-role-policy-attachment";
interface MyConfig {
  authenticationType: any;
  name: any;
}
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string, config: MyConfig) {
    super(scope, name);
    const assumeRole = new DataAwsIamPolicyDocument(this, "assume_role", {
      statement: [
        {
          actions: ["sts:AssumeRole"],
          effect: "Allow",
          principals: [
            {
              identifiers: ["appsync.amazonaws.com"],
              type: "Service",
            },
          ],
        },
      ],
    });
    const example = new IamRole(this, "example", {
      assumeRolePolicy: Token.asString(assumeRole.json),
      name: "example",
    });
    const awsIamRolePolicyAttachmentExample = new IamRolePolicyAttachment(
      this,
      "example_2",
      {
        policyArn:
          "arn:aws:iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs",
        role: example.name,
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsIamRolePolicyAttachmentExample.overrideLogicalId("example");
    const awsAppsyncGraphqlApiExample = new AppsyncGraphqlApi(
      this,
      "example_3",
      {
        logConfig: {
          cloudwatchLogsRoleArn: example.arn,
          fieldLogLevel: "ERROR",
        },
        authenticationType: config.authenticationType,
        name: config.name,
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsAppsyncGraphqlApiExample.overrideLogicalId("example");
  }
}

```

### Associate Web ACL (v2)

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
import { Wafv2WebAcl } from "./.gen/providers/aws/wafv2-web-acl";
import { Wafv2WebAclAssociation } from "./.gen/providers/aws/wafv2-web-acl-association";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const example = new AppsyncGraphqlApi(this, "example", {
      authenticationType: "API_KEY",
      name: "example",
    });
    const awsWafv2WebAclExample = new Wafv2WebAcl(this, "example_1", {
      defaultAction: {
        allow: {},
      },
      description: "Example of a managed rule.",
      name: "managed-rule-example",
      rule: [
        {
          name: "rule-1",
          overrideAction: {
            block: [{}],
          },
          priority: 1,
          statement: {
            managedRuleGroupStatement: {
              name: "AWSManagedRulesCommonRuleSet",
              vendorName: "AWS",
            },
          },
          visibilityConfig: {
            cloudwatchMetricsEnabled: false,
            metricName: "friendly-rule-metric-name",
            sampledRequestsEnabled: false,
          },
        },
      ],
      scope: "REGIONAL",
      visibilityConfig: {
        cloudwatchMetricsEnabled: false,
        metricName: "friendly-metric-name",
        sampledRequestsEnabled: false,
      },
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsWafv2WebAclExample.overrideLogicalId("example");
    const awsWafv2WebAclAssociationExample = new Wafv2WebAclAssociation(
      this,
      "example_2",
      {
        resourceArn: example.arn,
        webAclArn: Token.asString(awsWafv2WebAclExample.arn),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    awsWafv2WebAclAssociationExample.overrideLogicalId("example");
  }
}

```

### GraphQL run complexity, query depth, and introspection

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new AppsyncGraphqlApi(this, "example", {
      authenticationType: "AWS_IAM",
      introspectionConfig: "ENABLED",
      name: "example",
      queryDepthLimit: 2,
      resolverCountLimit: 2,
    });
  }
}

```

## Argument Reference

The following arguments are required:

* `authenticationType` - (Required) Authentication type. Valid values: `API_KEY`, `AWS_IAM`, `AMAZON_COGNITO_USER_POOLS`, `OPENID_CONNECT`, `AWS_LAMBDA`
* `name` - (Required) User-supplied name for the GraphSQL API.

The following arguments are optional:

* `additionalAuthenticationProvider` - (Optional) One or more additional authentication providers for the GraphSQL API. See [`additionalAuthenticationProvider` Block](#additional_authentication_provider-block) for details.
* `enhancedMetricsConfig` - (Optional) Enables and controls the enhanced metrics feature. See [`enhancedMetricsConfig` Block](#enhanced_metrics_config-block) for details.
* `introspectionConfig` - (Optional) Sets the value of the GraphQL API to enable (`ENABLED`) or disable (`DISABLED`) introspection. If no value is provided, the introspection configuration will be set to ENABLED by default. This field will produce an error if the operation attempts to use the introspection feature while this field is disabled. For more information about introspection, see [GraphQL introspection](https://graphql.org/learn/introspection/).
* `lambdaAuthorizerConfig` - (Optional) Nested argument containing Lambda authorizer configuration. See [`lambdaAuthorizerConfig` Block](#lambda_authorizer_config-block) for details.
* `logConfig` - (Optional) Nested argument containing logging configuration. See [`logConfig` Block](#log_config-block) for details.
* `openidConnectConfig` - (Optional) Nested argument containing OpenID Connect configuration. See [`openidConnectConfig` Block](#openid_connect_config-block) for details.
* `queryDepthLimit` - (Optional) The maximum depth a query can have in a single request. Depth refers to the amount of nested levels allowed in the body of query. The default value is `0` (or unspecified), which indicates there's no depth limit. If you set a limit, it can be between `1` and `75` nested levels. This field will produce a limit error if the operation falls out of bounds.

  Note that fields can still be set to nullable or non-nullable. If a non-nullable field produces an error, the error will be thrown upwards to the first nullable field available.
* `resolverCountLimit` - (Optional) The maximum number of resolvers that can be invoked in a single request. The default value is `0` (or unspecified), which will set the limit to `10000`. When specified, the limit value can be between `1` and `10000`. This field will produce a limit error if the operation falls out of bounds.
* `schema` - (Optional) Schema definition, in GraphQL schema language format. Terraform cannot perform drift detection of this configuration.
* `tags` - (Optional) Map of tags to assign to the resource. If configured with a provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.
* `userPoolConfig` - (Optional) Amazon Cognito User Pool configuration. See [`userPoolConfig` Block](#user_pool_config-block) for details.
* `visibility` - (Optional) Sets the value of the GraphQL API to public (`GLOBAL`) or private (`PRIVATE`). If no value is provided, the visibility will be set to `GLOBAL` by default. This value cannot be changed once the API has been created.
* `xrayEnabled` - (Optional) Whether tracing with X-ray is enabled. Defaults to false.

### `additionalAuthenticationProvider` Block

The `additionalAuthenticationProvider` configuration block supports the following arguments:

* `authenticationType` - (Required) Authentication type. Valid values: `API_KEY`, `AWS_IAM`, `AMAZON_COGNITO_USER_POOLS`, `OPENID_CONNECT`, `AWS_LAMBDA`
* `openidConnectConfig` - (Optional) Nested argument containing OpenID Connect configuration. See [`openidConnectConfig` Block](#openid_connect_config-block) for details.
* `userPoolConfig` - (Optional) Amazon Cognito User Pool configuration. See [`userPoolConfig` Block](#user_pool_config-block) for details.

### `enhancedMetricsConfig` Block

The `enhancedMetricsConfig` configuration block supports the following arguments. See [EnhancedMetricsConfig](https://docs.aws.amazon.com/appsync/latest/APIReference/API_EnhancedMetricsConfig.html) for more information.

* `dataSourceLevelMetricsBehavior` - (Optional) How data source metrics will be emitted to CloudWatch. Valid values: `FULL_REQUEST_DATA_SOURCE_METRICS`, `PER_DATA_SOURCE_METRICS`
* `operationLevelMetricsConfig` - (Optional) How operation metrics will be emitted to CloudWatch. Valid values: `ENABLED`, `DISABLED`
* `resolverLevelMetricsBehavior` - (Optional) How resolver metrics will be emitted to CloudWatch. Valid values: `FULL_REQUEST_RESOLVER_METRICS`, `PER_RESOLVER_METRICS`

### `lambdaAuthorizerConfig` Block

The `lambdaAuthorizerConfig` configuration block supports the following arguments:

* `authorizerUri` - (Required) ARN of the Lambda function to be called for authorization. Note: This Lambda function must have a resource-based policy assigned to it, to allow `lambda:InvokeFunction` from service principal `appsync.amazonaws.com`.
* `authorizerResultTtlInSeconds` - (Optional) Number of seconds a response should be cached for. The default is 5 minutes (300 seconds). The Lambda function can override this by returning a `ttlOverride` key in its response. A value of 0 disables caching of responses. Minimum value of 0. Maximum value of 3600.
* `identityValidationExpression` - (Optional) Regular expression for validation of tokens before the Lambda function is called.

### `logConfig` Block

The `logConfig` configuration block supports the following arguments:

* `cloudwatchLogsRoleArn` - (Required) Amazon Resource Name of the service role that AWS AppSync will assume to publish to Amazon CloudWatch logs in your account.
* `fieldLogLevel` - (Required) Field logging level. Valid values: `ALL`, `ERROR`, `NONE`.
* `excludeVerboseContent` - (Optional) Set to TRUE to exclude sections that contain information such as headers, context, and evaluated mapping templates, regardless of logging  level. Valid values: `true`, `false`. Default value: `false`

### `openidConnectConfig` Block

The `openidConnectConfig` configuration block supports the following arguments:

* `issuer` - (Required) Issuer for the OpenID Connect configuration. The issuer returned by discovery MUST exactly match the value of iss in the ID Token.
* `authTtl` - (Optional) Number of milliseconds a token is valid after being authenticated.
* `clientId` - (Optional) Client identifier of the Relying party at the OpenID identity provider. This identifier is typically obtained when the Relying party is registered with the OpenID identity provider. You can specify a regular expression so the AWS AppSync can validate against multiple client identifiers at a time.
* `iatTtl` - (Optional) Number of milliseconds a token is valid after being issued to a user.

### `userPoolConfig` Block

The `userPoolConfig` configuration block supports the following arguments:

* `defaultAction` - (Required only if Cognito is used as the default auth provider) Action that you want your GraphQL API to take when a request that uses Amazon Cognito User Pool authentication doesn't match the Amazon Cognito User Pool configuration. Valid: `ALLOW` and `DENY`
* `userPoolId` - (Required) User pool ID.
* `appIdClientRegex` - (Optional) Regular expression for validating the incoming Amazon Cognito User Pool app client ID.
* `awsRegion` - (Optional) AWS region in which the user pool was created.

## Attribute Reference

This resource exports the following attributes in addition to the arguments above:

* `id` - API ID
* `arn` - ARN
* `tagsAll` - Map of tags assigned to the resource, including those inherited from the provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).
* `uris` - Map of URIs associated with the APIE.g., `uris["GRAPHQL"] = https://ID.appsync-api.REGION.amazonaws.com/graphql`

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import AppSync GraphQL API using the GraphQL API ID. For example:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { AppsyncGraphqlApi } from "./.gen/providers/aws/appsync-graphql-api";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    AppsyncGraphqlApi.generateConfigForImport(this, "example", "0123456789");
  }
}

```

Using `terraform import`, import AppSync GraphQL API using the GraphQL API ID. For example:

```console
% terraform import aws_appsync_graphql_api.example 0123456789
```

<!-- cache-key: cdktf-0.20.1 input-b3fcf68bd77d14b1baaef5a4e768478cbfaee35f52b7747906b682db24ab94ac -->