---
subcategory: "OpsWorks"
layout: "aws"
page_title: "AWS: aws_opsworks_haproxy_layer"
description: |-
  Provides an OpsWorks HAProxy layer resource.
---


<!-- Please do not edit this file, it is generated. -->
# Resource: aws_opsworks_haproxy_layer

Provides an OpsWorks haproxy layer resource.

## Example Usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { OpsworksHaproxyLayer } from "./.gen/providers/aws/opsworks-haproxy-layer";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new OpsworksHaproxyLayer(this, "lb", {
      stackId: main.id,
      statsPassword: "foobarbaz",
    });
  }
}

```

## Argument Reference

This resource supports the following arguments:

* `stackId` - (Required) ID of the stack the layer will belong to.
* `statsPassword` - (Required) The password to use for HAProxy stats.
* `name` - (Optional) A human-readable name for the layer.
* `autoAssignElasticIps` - (Optional) Whether to automatically assign an elastic IP address to the layer's instances.
* `autoAssignPublicIps` - (Optional) For stacks belonging to a VPC, whether to automatically assign a public IP address to each of the layer's instances.
* `customInstanceProfileArn` - (Optional) The ARN of an IAM profile that will be used for the layer's instances.
* `customSecurityGroupIds` - (Optional) Ids for a set of security groups to apply to the layer's instances.
* `autoHealing` - (Optional) Whether to enable auto-healing for the layer.
* `healthcheckMethod` - (Optional) HTTP method to use for instance healthchecks. Defaults to "OPTIONS".
* `healthcheckUrl` - (Optional) URL path to use for instance healthchecks. Defaults to "/".
* `installUpdatesOnBoot` - (Optional) Whether to install OS and package updates on each instance when it boots.
* `instanceShutdownTimeout` - (Optional) The time, in seconds, that OpsWorks will wait for Chef to complete after triggering the Shutdown event.
* `elasticLoadBalancer` - (Optional) Name of an Elastic Load Balancer to attach to this layer
* `drainElbOnShutdown` - (Optional) Whether to enable Elastic Load Balancing connection draining.
* `statsEnabled` - (Optional) Whether to enable HAProxy stats.
* `statsUrl` - (Optional) The HAProxy stats URL. Defaults to "/haproxy?stats".
* `statsUser` - (Optional) The username for HAProxy stats. Defaults to "opsworks".
* `systemPackages` - (Optional) Names of a set of system packages to install on the layer's instances.
* `useEbsOptimizedInstances` - (Optional) Whether to use EBS-optimized instances.
* `ebsVolume` - (Optional) `ebsVolume` blocks, as described below, will each create an EBS volume and connect it to the layer's instances.
* `customJson` - (Optional) Custom JSON attributes to apply to the layer.
* `tags` - (Optional) A map of tags to assign to the resource. If configured with a provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.

The following extra optional arguments, all lists of Chef recipe names, allow
custom Chef recipes to be applied to layer instances at the five different
lifecycle events, if custom cookbooks are enabled on the layer's stack:

* `customConfigureRecipes`
* `customDeployRecipes`
* `customSetupRecipes`
* `customShutdownRecipes`
* `customUndeployRecipes`

An `ebsVolume` block supports the following arguments:

* `mountPoint` - (Required) The path to mount the EBS volume on the layer's instances.
* `size` - (Required) The size of the volume in gigabytes.
* `numberOfDisks` - (Required) The number of disks to use for the EBS volume.
* `raidLevel` - (Required) The RAID level to use for the volume.
* `type` - (Optional) The type of volume to create. This may be `standard` (the default), `io1` or `gp2`.
* `iops` - (Optional) For PIOPS volumes, the IOPS per disk.

## Attribute Reference

This resource exports the following attributes in addition to the arguments above:

* `id` - The id of the layer.
* `arn` - The Amazon Resource Name(ARN) of the layer.
* `tagsAll` - A map of tags assigned to the resource, including those inherited from the provider [`defaultTags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).

<!-- cache-key: cdktf-0.20.1 input-d7e3b606c224ad4d900794b3922f5773ba5b6e0545823dc60bc75ee69f563826 -->