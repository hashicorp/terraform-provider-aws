---
subcategory: "KMS (Key Management)"
layout: "aws"
page_title: "AWS: aws_kms_custom_key_store"
description: |-
  Terraform resource for managing an AWS KMS (Key Management) Custom Key Store.
---


<!-- Please do not edit this file, it is generated. -->
# Resource: aws_kms_custom_key_store

Terraform resource for managing an AWS KMS (Key Management) Custom Key Store.

## Example Usage

### CloudHSM

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Fn, Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { KmsCustomKeyStore } from "./.gen/providers/aws/kms-custom-key-store";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new KmsCustomKeyStore(this, "test", {
      cloudHsmClusterId: cloudHsmClusterId.stringValue,
      customKeyStoreName: "kms-custom-key-store-test",
      keyStorePassword: "noplaintextpasswords1",
      trustAnchorCertificate: Token.asString(Fn.file("anchor-certificate.crt")),
    });
  }
}

```

### External Key Store (VPC)

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { KmsCustomKeyStore } from "./.gen/providers/aws/kms-custom-key-store";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new KmsCustomKeyStore(this, "example", {
      customKeyStoreName: "example-vpc-xks",
      customKeyStoreType: "EXTERNAL_KEY_STORE",
      xksProxyAuthenticationCredential: {
        accessKeyId: ephemeralAccessKeyId.stringValue,
        rawSecretAccessKey: ephemeralSecretAccessKey.stringValue,
      },
      xksProxyConnectivity: "VPC_ENDPOINT_SERVICE",
      xksProxyUriEndpoint: "https://myproxy-private.xks.example.com",
      xksProxyUriPath: "/kms/xks/v1",
      xksProxyVpcEndpointServiceName:
        "com.amazonaws.vpce.us-east-1.vpce-svc-example",
    });
  }
}

```

### External Key Store (Public)

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { KmsCustomKeyStore } from "./.gen/providers/aws/kms-custom-key-store";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new KmsCustomKeyStore(this, "example", {
      customKeyStoreName: "example-public-xks",
      customKeyStoreType: "EXTERNAL_KEY_STORE",
      xksProxyAuthenticationCredential: {
        accessKeyId: ephemeralAccessKeyId.stringValue,
        rawSecretAccessKey: ephemeralSecretAccessKey.stringValue,
      },
      xksProxyConnectivity: "PUBLIC_ENDPOINT",
      xksProxyUriEndpoint: "https://myproxy.xks.example.com",
      xksProxyUriPath: "/kms/xks/v1",
    });
  }
}

```

## Argument Reference

The following arguments are required:

* `customKeyStoreName` - (Required) Unique name for Custom Key Store.

The following arguments are optional:

* `customKeyStoreType` - (Optional, ForceNew) Specifies the type of key store to create. Valid values are `AWS_CLOUDHSM` and `EXTERNAL_KEY_STORE`. If omitted, AWS will default the value to `AWS_CLOUDHSM`.

If `customKeyStoreType` is `AWS_CLOUDHSM`, the following optional arguments must be set:

* `cloudHsmClusterId` - (Optional) Cluster ID of CloudHSM.
* `keyStorePassword` - (Optional) Specifies the `kmsuser` password for an AWS CloudHSM key store.
* `trustAnchorCertificate` - (Optional) Specifies the certificate for an AWS CloudHSM key store.

If `customKeyStoreType` is `EXTERNAL_KEY_STORE`, the following optional arguments must be set:

* `xksProxyAuthenticationCredential` - (Optional) Specifies an authentication credential for the external key store proxy (XKS proxy). See [`xksProxyAuthenticationCredential` attribute reference](#xks_proxy_authentication_credential-argument-reference) below.
* `xksProxyConnectivity` - (Optional) Indicates how AWS KMS communicates with the external key store proxy.
* `xksProxyUriEndpoint` - (Optional) Specifies the endpoint that AWS KMS uses to send requests to the external key store proxy (XKS proxy).
* `xksProxyUriPath` - (Optional) Specifies the base path to the proxy APIs for this external key store. To find this value, see the documentation for your external key store proxy.
* `xksProxyVpcEndpointServiceName` - (Optional) Specifies the name of the Amazon VPC endpoint service for interface endpoints that is used to communicate with your external key store proxy (XKS proxy). This argument is required when the value of `xksProxyConnectivity` is `VPC_ENDPOINT_SERVICE`.

### `xksProxyAuthenticationCredential` Argument Reference

* `accessKeyId` - (Required) A unique identifier for the raw secret access key.
* `rawSecretAccessKey` - (Required) A secret string of 43-64 characters.

## Attribute Reference

This resource exports the following attributes in addition to the arguments above:

* `id` - The Custom Key Store ID

## Timeouts

[Configuration options](https://developer.hashicorp.com/terraform/language/resources/syntax#operation-timeouts):

* `create` - (Default `15m`)
* `update` - (Default `15m`)
* `delete` - (Default `15m`)

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import KMS (Key Management) Custom Key Store using the `id`. For example:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { KmsCustomKeyStore } from "./.gen/providers/aws/kms-custom-key-store";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    KmsCustomKeyStore.generateConfigForImport(
      this,
      "example",
      "cks-5ebd4ef395a96288e"
    );
  }
}

```

Using `terraform import`, import KMS (Key Management) Custom Key Store using the `id`. For example:

```console
% terraform import aws_kms_custom_key_store.example cks-5ebd4ef395a96288e
```

<!-- cache-key: cdktf-0.20.8 input-3bdca951dcb21fa211cdd37fd8d031dedc83fb6e756f71526716295381a5a568 -->