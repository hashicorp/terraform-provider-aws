<!-- Copyright IBM Corp. 2014, 2026 -->
<!-- SPDX-License-Identifier: MPL-2.0 -->

<!-- markdownlint-configure-file { "code-block-style": false } -->
# Adding a New List Resource

List resources in the Terraform AWS Provider allow users to retrieve and manage collections of AWS resources.

Each list resource should be submitted for review individually. Pull requests containing multiple list resources or other resources are more difficult to review, and maintainers will typically request that they be split into separate submissions.

## Prerequisites

List Resources are dependent on [resource identity](https://developer.hashicorp.com/terraform/plugin/framework/resources/identity) being implemented on the target resource. Ensure that the resource identity has been created and merged first. Refer to [Adding Resource Identity](ai-agent-guides/parameterized-resource-identity.md) for detailed instructions.

## Steps to Add a List Resource

Naming of a new List Resource should be identical to the target resource. For example, if adding a new list resource for `aws_batch_job_defintion`, the list resource should be named `aws_batch_job_definition`.

Use the [skaff](skaff.md) provider scaffolding tool to generate new ephemeral resource and test templates using your chosen name. Existing resources can be implemented using either Terraform Plugin SDKv2 or Terraform Plugin Framework. The implementation type can be identified by inspecting the tags in the resource file.

### SDK resources

SDKv2 target resource will have the tag `@SDKResource()` in the resource file. For these resources use the following, replacing `<resource name>` with the name of the resource being added, eg `JobDefinition`.

```console
skaff list -n <resource name>
```

### Framework resources

Framework target resource will have the tag `@FrameworkResource()` in the resource file. For these resources use the following, replacing `<resource name>` with the name of the resource being added, eg `JobDefinition`.

```console
skaff list -p -n <resource name>
```

`Skaff` will generate the following files:

- `internal/service/<service>/<resource_name>_list.go` - List Resource implementation
- `internal/service/<service>/<resource_name>_list_test.go` - List Resource acceptance tests
- `website/docs/list-resources/<service>_<resource_name>.html.markdown` - List Resource documentation
- `internal/service/<service>/testdata/<ResourceName>/list_basic/main.tf` - Basic List Resource acceptance test configuration
- `internal/service/<service>/testdata/<ResourceName>/list_basic/main.tfquery.hcl` - Query for using list resource

### Fill in the `List` handler

Use the AWS API documentation to resolve the appropriate types the be able to list the resource. This is typically done using `Describe` or `List` API calls.

### Implement acceptance tests

Acceptance tests are mostly generated by `skaff` but will need some modifications to function correctly. a functioning terraform configuration is necessary to run the acceptance tests. The generated test configuration will need to be updated to include any required parameters for the resource.

#### Example test file

```hcl
resource "aws_batch_job_definition" "test" {
  count = var.resource_count

  name = "${var.rName}-${count.index}"
  
  type = "container"
  container_properties = jsonencode({
    image  = "busybox"
    vcpus  = 1
    memory = 128
  })
}

variable "rName" {
  description = "Name for resource"
  type        = string
  nullable    = false
}

variable "resource_count" {
  description = "The number of resources to create"
  type        = number
  nullable    = false
}
```